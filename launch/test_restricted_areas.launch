<launch>
    <!-- 启动RViz并加载自定义配置 -->
    <node name="rviz" pkg="rviz" type="rviz"
          args="-d $(find restricted_areas_plugin)/config/restricted_areas.rviz"
          output="screen">
        <remap from="/restricted_areas" to="/restricted_areas"/>
    </node>

    <!-- 加载禁区插件参数 -->
    <rosparam command="load" ns="restricted_areas">
        file: $(find restricted_areas_plugin)/config/restricted_areas.yaml
    </rosparam>

    <!-- 加载move_base配置(可选) -->
    <arg name="use_navigation" default="false"/>
    <group if="$(arg use_navigation)">
        <!-- 在全局代价地图中启用禁区插件 -->
        <rosparam ns="move_base/global_costmap/plugins">
            - {name: restricted_areas, type: "restricted_areas_plugin::RestrictedAreasLayer"}
        </rosparam>

        <!-- 禁区层配置 -->
        <rosparam ns="move_base/global_costmap/restricted_areas">
            enabled: true
            fill_polygons: true
        </rosparam>
    </group>

</launch>